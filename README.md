# PiperLib: Library and programs for using AgileX Piper arm.

Install deps

  apt install can-utils ethtool
  pip3 install numpy


Guide

* Initialize can connection. Need to run at robot connection or power cycle.

  ```
  bash /home/Piper_ros/can_activate.sh can0 1000000
  ```

  More


* Run a predefined trajectory for analysis

  ```
  python3 run_tractory.py --trajectory=... --log_file=... ---mit_mode=True/False
  ```

  Then

  ```
  python3 analyze_log.py log_file
  ```


* Run teleop

  Program and run the Tiva C board with Energia IDE. Code in "pollo.energia.ino.

  Connect the potentiometer control device. Check with the serial monitor in Engergia IDE that the value.

  Set the zero and conversion ratio in teleop.py. Verify the range is ok.

  Run teleop

  ```
  python3 teleop.py
  ```
  

Content

  README.md: this file
  piper.py: piper\_lib main file, implemented Piper and Metronome.
  
  can\_activate.sh: script to setup can connection. from piper\_sdk.
  
     usage:


  run\_trajectory.py: run trajectory and log command sent and sensed joints.

  analyze\_log.py: plot control log file generated by run\_trajectory.py
  
  teleop.py: teleop program. (WIP)

  pollo.energia.ino: Tiva C board energia code for pollo, a potentiometer gello device.

  data: captured data and plot.
  can\_utils.py: can utility functions. from piper\_sdk.
  piper\_can\_ids.py: CAN id definition. from piper\_sdk. 

